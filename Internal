-- Gui to Lua
-- Version: 3.2

-- Instances:
local Executor = Instance.new("ScreenGui")
local TopBar = Instance.new("Frame")
local Close = Instance.new("TextButton")
local TextLabel = Instance.new("TextLabel")
local Frame = Instance.new("Frame")
local ScriptBox = Instance.new("TextBox")
local Clear = Instance.new("TextButton")
local Execute = Instance.new("TextButton")
local EnableDisable = Instance.new("Frame")
local ImageButton = Instance.new("ImageButton")
local UICorner = Instance.new("UICorner")

--Properties:
Executor.Name = "Executor"
Executor.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
Executor.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

TopBar.Name = "TopBar"
TopBar.Parent = Executor
TopBar.BackgroundColor3 = Color3.fromRGB(85, 125, 255)
TopBar.BorderColor3 = Color3.fromRGB(0, 0, 0)
TopBar.BorderSizePixel = 0
TopBar.Position = UDim2.new(0.287383169, 0, 0.305970162, 0)
TopBar.Size = UDim2.new(0, 449, 0, 18)

Close.Name = "Close"
Close.Parent = TopBar
Close.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Close.BackgroundTransparency = 1.000
Close.BorderColor3 = Color3.fromRGB(0, 0, 0)
Close.BorderSizePixel = 0
Close.Position = UDim2.new(0.92650336, 0, 0, 0)
Close.Size = UDim2.new(0, 33, 0, 24)
Close.Font = Enum.Font.SourceSans
Close.Text = "^"
Close.TextColor3 = Color3.fromRGB(255, 255, 255)
Close.TextSize = 29.000

TextLabel.Parent = TopBar
TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.BackgroundTransparency = 1.000
TextLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.BorderSizePixel = 0
TextLabel.Position = UDim2.new(0.0155902002, 0, 0, 0)
TextLabel.Size = UDim2.new(0, 193, 0, 18)
TextLabel.Font = Enum.Font.SourceSans
TextLabel.Text = "<3 Internal"
TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.TextSize = 14.000
TextLabel.TextXAlignment = Enum.TextXAlignment.Left

Frame.Parent = TopBar
Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(2.71871528e-07, 0, 0.999999166, 0)
Frame.Size = UDim2.new(0, 448, 0, 235)

ScriptBox.Name = "ScriptBox"
ScriptBox.Parent = Frame
ScriptBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
ScriptBox.BorderColor3 = Color3.fromRGB(0, 0, 0)
ScriptBox.BorderSizePixel = 0
ScriptBox.Position = UDim2.new(0.0155902002, 0, 0.0318954811, 0)
ScriptBox.Size = UDim2.new(0, 435, 0, 174)
ScriptBox.Font = Enum.Font.SourceSans
ScriptBox.Text = ""
ScriptBox.TextColor3 = Color3.fromRGB(255, 255, 255)
ScriptBox.TextSize = 14.000
ScriptBox.TextXAlignment = Enum.TextXAlignment.Left
ScriptBox.TextYAlignment = Enum.TextYAlignment.Top

Clear.Name = "Clear"
Clear.Parent = Frame
Clear.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Clear.BorderColor3 = Color3.fromRGB(0, 0, 0)
Clear.BorderSizePixel = 0
Clear.Position = UDim2.new(0.554565728, 0, 0.807843149, 0)
Clear.Size = UDim2.new(0, 193, 0, 39)
Clear.Font = Enum.Font.SourceSans
Clear.Text = "Clear"
Clear.TextColor3 = Color3.fromRGB(255, 255, 255)
Clear.TextSize = 14.000

Execute.Name = "Execute"
Execute.Parent = Frame
Execute.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Execute.BorderColor3 = Color3.fromRGB(0, 0, 0)
Execute.BorderSizePixel = 0
Execute.Position = UDim2.new(0.0155902002, 0, 0.807843149, 0)
Execute.Size = UDim2.new(0, 193, 0, 39)
Execute.Font = Enum.Font.SourceSans
Execute.Text = "Execute"
Execute.TextColor3 = Color3.fromRGB(255, 255, 255)
Execute.TextSize = 14.000

EnableDisable.Name = "Enable/Disable"
EnableDisable.Parent = Executor
EnableDisable.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
EnableDisable.BackgroundTransparency = 1.000
EnableDisable.BorderColor3 = Color3.fromRGB(0, 0, 0)
EnableDisable.BorderSizePixel = 0
EnableDisable.Position = UDim2.new(0.429906547, 0, 0.0895522386, 0)
EnableDisable.Size = UDim2.new(0, 49, 0, 49)
EnableDisable.Visible = false

ImageButton.Parent = EnableDisable
ImageButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ImageButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
ImageButton.BorderSizePixel = 0
ImageButton.Size = UDim2.new(0, 49, 0, 49)
ImageButton.Image = "rbxassetid://116178165142170"

UICorner.CornerRadius = UDim.new(0, 20)
UICorner.Parent = ImageButton

-- Close Button Functionality
local isOpen = true
Close.MouseButton1Click:Connect(function()
    isOpen = not isOpen

    -- Toggle visibility of the frame
    Frame.Visible = isOpen

    -- Change button text
    Close.Text = isOpen and "^" or ">"

    -- Change button position
    Close.Position = isOpen
        and UDim2.new(0.927, 0, 0, 0)
        or UDim2.new(0.927, 0, -0.167, 0)
end)

-- Script Execution (Execute Button)
Execute.MouseButton1Click:Connect(function()
    local scriptToExecute = ScriptBox.Text -- Get the script from the textbox
    local success, errorMessage = pcall(function()
        loadstring(scriptToExecute)() -- Try running the script
    end)

    if not success then
        warn("Script execution failed: " .. errorMessage) -- Print the error if execution fails
    end
end)

-- Clear Button
Clear.MouseButton1Click:Connect(function()
    ScriptBox.Text = ""  -- Clear the script box text
end)

-- Draggable TopBar
local UserInputService = game:GetService("UserInputService")
local dragging = false
local dragStart, startPos

TopBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = TopBar.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

-- Update position on move
UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        TopBar.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end)
